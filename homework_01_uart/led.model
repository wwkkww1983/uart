<!DOCTYPE Robei>
<Module Code="`define DEL 1&#xa;//&#xa;// LED display start signal&#xa;//&#xa;reg  display_en_q;&#xa;wire display_start;&#xa;&#xa;always @( posedge clk or negedge rst_n ) begin&#xa;  if( ~rst_n ) begin&#xa;    display_en_q &lt;= #`DEL 1'b0;&#xa;  end&#xa;  else begin&#xa;    display_en_q &lt;= #`DEL display_en;&#xa;  end&#xa;end      &#xa;// Rising edge effective&#xa;assign display_start = ~display_en_q &amp;&amp; display_en;&#xa;&#xa;//&#xa;// Parity check&#xa;//&#xa;always @( posedge clk ) begin&#xa;  if( data_in[8] != ( ^data_in[7:0] ) ) begin&#xa;    $display(&quot;Parity check failed.&quot;);&#xa;    $stop;&#xa;  end&#xa;end  &#xa;&#xa;" Include="" Parameters="" Height="600" Class="module" Y="0" Name="led" Type="module" Width="900" File="Current/led.model" Color="#d3d3d3" Comment="" Parent="0" X="0">
 <Module Code="`define DEL 1&#xa;&#xa;reg       [2:0]   cs;&#xa;reg       [2:0]   ns;&#xa;&#xa;reg       [3:0]   shift_cnt;&#xa;reg       [7:0]   data_reg;&#xa;&#xa;reg       [3:0]   ones_reg;&#xa;reg       [3:0]   tens_reg;&#xa;reg       [3:0]   hundreds_reg;&#xa;&#xa;reg       [3:0]   ones_out;&#xa;reg       [3:0]   tens_out;&#xa;reg       [3:0]   hundreds_out;&#xa;&#xa;wire      [3:0]   ones_temp;&#xa;wire      [3:0]   tens_temp;&#xa;wire      [3:0]   hundreds_temp;&#xa;&#xa;parameter [2:0]  IDLE   = 3'b001,&#xa;  SHIFT     = 3'b010,&#xa;  DONE      = 3'b100;&#xa;&#xa;//&#xa;// FSM step1&#xa;//&#xa;always @( posedge clk or negedge rst_n ) begin&#xa;  if ( !rst_n ) begin&#xa;    cs &lt;= #`DEL IDLE;&#xa;  end&#xa;  else begin&#xa;    cs &lt;= #`DEL ns;&#xa;  end&#xa;end&#xa;&#xa;//&#xa;// FSM step2&#xa;//&#xa;always @( * ) begin&#xa;  ns = IDLE;&#xa;  case ( cs )&#xa;    IDLE : begin&#xa;      if ( tran_en ) begin&#xa;        ns = SHIFT;&#xa;      end&#xa;      else begin&#xa;        ns = IDLE;&#xa;      end&#xa;    end&#xa;    SHIFT: begin&#xa;      if ( shift_cnt == 9 ) begin&#xa;        ns = DONE;&#xa;      end &#xa;      else begin&#xa;        ns = SHIFT;&#xa;      end&#xa;    end &#xa;    DONE : begin &#xa;        ns = IDLE;&#xa;    end &#xa;    default : begin &#xa;        ns = IDLE;&#xa;    end &#xa;  endcase &#xa;end&#xa;&#xa;//&#xa;// FSM step3&#xa;//&#xa;always @( posedge clk or negedge rst_n ) begin &#xa;  if ( !rst_n ) begin &#xa;    ones_reg     &lt;= #`DEL 4'b0;&#xa;    tens_reg     &lt;= #`DEL 4'b0;&#xa;    hundreds_reg &lt;= #`DEL 4'b0;&#xa;    shift_cnt    &lt;= #`DEL 4'b0;&#xa;    data_reg     &lt;= #`DEL 8'b0;&#xa;    tran_done    &lt;= #`DEL 1'b0;&#xa;  end&#xa;  else begin &#xa;    case ( ns )&#xa;      IDLE: begin&#xa;        ones_reg     &lt;= #`DEL 4'b0;&#xa;        tens_reg     &lt;= #`DEL 4'b0;&#xa;        hundreds_reg &lt;= #`DEL 4'b0;&#xa;        shift_cnt    &lt;= #`DEL 4'b0;&#xa;        data_reg     &lt;= #`DEL data_in;&#xa;        tran_done    &lt;= #`DEL 1'b0;&#xa;      end&#xa;      SHIFT: begin&#xa;        if( shift_cnt == 8 ) begin&#xa;          shift_cnt &lt;= #`DEL shift_cnt + 1'b1 ;&#xa;          data_reg     &lt;= #`DEL data_reg;&#xa;          ones_reg     &lt;= #`DEL ones_reg;&#xa;          tens_reg     &lt;= #`DEL tens_reg;&#xa;          hundreds_reg &lt;= #`DEL hundreds_reg;&#x9;&#x9;&#x9;&#xa;        end&#xa;        else begin&#xa;          shift_cnt    &lt;= #`DEL shift_cnt + 1'b1;&#xa;          data_reg     &lt;= #`DEL data_reg  &lt;&lt; 1;&#xa;          ones_reg     &lt;= #`DEL {ones_temp[2:0], data_reg[7]};&#xa;          tens_reg     &lt;= #`DEL {tens_temp[2:0], ones_temp[3]};&#xa;          hundreds_reg &lt;= #`DEL {hundreds_temp[2:0], tens_temp[3]};&#xa;        end&#xa;      end&#xa;      DONE: begin&#xa;        tran_done &lt;= #`DEL 1'b1;&#xa;      end&#xa;    endcase &#xa;  end &#xa;end      &#xa;&#xa;always @( posedge clk or negedge rst_n ) begin&#xa;  if( ~rst_n ) begin&#xa;    ones_out     &lt;= #`DEL 4'b0;&#xa;    tens_out     &lt;= #`DEL 4'b0;&#xa;    hundreds_out &lt;= #`DEL 4'b0;&#xa;  end&#xa;  else if( tran_done ) begin    &#xa;    ones_out     &lt;= #`DEL ones_reg;&#xa;    tens_out     &lt;= #`DEL tens_reg;&#xa;    hundreds_out &lt;= #`DEL hundreds_reg;&#xa;  end&#xa;  else begin    &#xa;    ones_out     &lt;= #`DEL ones_out;&#xa;    tens_out     &lt;= #`DEL tens_out;&#xa;    hundreds_out &lt;= #`DEL hundreds_out;&#xa;  end&#xa;end      &#xa;&#xa;&#xa;assign ones_temp     = ( ones_reg     > 4'd4 ) ? ( ones_reg     + 2'd3 ) : ones_reg;&#xa;assign tens_temp     = ( tens_reg     > 4'd4 ) ? ( tens_reg     + 2'd3 ) : tens_reg;&#xa;assign hundreds_temp = ( hundreds_reg > 4'd4 ) ? ( hundreds_reg + 2'd3 ) : hundreds_reg;&#xa;&#xa;assign hundreds_place = hundreds_out;&#xa;assign tens_place     = tens_out;&#xa;assign ones_place     = ones_out;&#xa;&#xa;&#xa;&#xa;" Include="" Parameters="" Height="257" Class="bin_bcd" Y="158.972" Name="bin_bcd1" Type="model" Width="284" File="Current/bin_bcd.model" Color="#d3d3d3" Comment="" Parent="led" X="263.305">
  <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.124514" Name="clk" Width="20" Color="#0000ff" Parent="bin_bcd1" X="-0.0704225" Connect="" Inout="input"/>
  <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.287938" Name="rst_n" Width="20" Color="#00ffff" Parent="bin_bcd1" X="-0.0704225" Connect="" Inout="input"/>
  <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.614786" Name="tran_en" Width="20" Color="#8a2be2" Parent="bin_bcd1" X="-0.0704225" Connect="display_start" Inout="input"/>
  <Port Datasize="8" Datatype="wire" Height="20" Function="" Side="left" Y="0.451362" Name="data_in" Width="20" Color="#a52a2a" Parent="bin_bcd1" X="-0.0704225" Connect="data_in[7:0]" Inout="input"/>
  <Port Datasize="1" Datatype="reg" Height="20" Function="" Side="right" Y="0.124514" Name="tran_done" Width="20" Color="#7fff00" Parent="bin_bcd1" X="0.929577" Connect="" Inout="output"/>
  <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.287938" Name="hundreds_place" Width="20" Color="#5f9ea0" Parent="bin_bcd1" X="0.929577" Connect="" Inout="output"/>
  <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.451362" Name="tens_place" Width="20" Color="#b8860b" Parent="bin_bcd1" X="0.929577" Connect="" Inout="output"/>
  <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.614786" Name="ones_place" Width="20" Color="#6495ed" Parent="bin_bcd1" X="0.929577" Connect="" Inout="output"/>
 </Module>
 <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.15" Name="clk" Width="20" Color="#0000ff" Parent="led" X="-0.0222222" Inout="input"/>
 <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.316667" Name="rst_n" Width="20" Color="#00ffff" Parent="led" X="-0.0222222" Inout="input"/>
 <Port Datasize="9" Datatype="wire" Height="20" Function="" Side="left" Y="0.481667" Name="data_in" Width="20" Color="#8a2be2" Parent="led" X="-0.0222222" Inout="input"/>
 <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="left" Y="0.65" Name="display_en" Width="20" Color="#a52a2a" Parent="led" X="-0.0222222" Inout="input"/>
 <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.65" Name="led0" Width="20" Color="#00bfff" Parent="led" X="0.977778" Inout="output"/>
 <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.481667" Name="led1" Width="20" Color="#006400" Parent="led" X="0.977778" Inout="output"/>
 <Port Datasize="4" Datatype="wire" Height="20" Function="" Side="right" Y="0.316667" Name="led2" Width="20" Color="#b8860b" Parent="led" X="0.977778" Inout="output"/>
 <Port Datasize="1" Datatype="wire" Height="20" Function="" Side="right" Y="0.15" Name="led_done" Width="20" Color="#9932cc" Parent="led" X="0.977778" Inout="output"/>
 <Wire Datasize="1" From="led>clk" Datatype="wire" Name="led_clk" Parent="led" To="led#bin_bcd1>clk"/>
 <Wire Datasize="1" From="led>rst_n" Datatype="wire" Name="led_rst_n" Parent="led" To="led#bin_bcd1>rst_n"/>
 <Wire Datasize="1" From="led#bin_bcd1>tran_done" Datatype="wire" Name="bin_bcd1_tran_done" Parent="led" To="led>led_done"/>
 <Wire Datasize="4" From="led#bin_bcd1>hundreds_place" Datatype="wire" Name="bin_bcd1_hundreds_place" Parent="led" To="led>led2"/>
 <Wire Datasize="4" From="led#bin_bcd1>tens_place" Datatype="wire" Name="bin_bcd1_tens_place" Parent="led" To="led>led1"/>
 <Wire Datasize="4" From="led#bin_bcd1>ones_place" Datatype="wire" Name="bin_bcd1_ones_place" Parent="led" To="led>led0"/>
</Module>
