<!DOCTYPE Robei>
<Module Parameters="" Y="0" File="Current/sell.model" Type="module" Class="module" Parent="0" Height="600" X="0" Comment="" Color="#d3d3d3" Name="sell" Width="900" Include="" Code="&#x9;reg [2:0] ns;&#xa;&#x9;reg [2:0] cs;&#xa;&#x9;&#xa;&#x9;parameter [2:0] &#xa;&#x9;&#x9;&#x9;&#x9;IDLE&#x9;&#x9;&#x9;   = 3'h0,&#xa;&#x9;&#x9;&#x9;&#x9;HALF &#x9;&#x9;&#x9;= 3'h1,&#xa;&#x9;&#x9;&#x9;&#x9;ONE  &#x9;&#x9;&#x9;= 3'h2,&#xa;&#x9;&#x9;&#x9;&#x9;ONE_HALF = 3'h3,&#xa;&#x9;&#x9;&#x9;&#x9;TWO &#x9;&#x9;&#x9;   &#x9;= 3'h4;&#xa;&#x9;&#xa;&#x9;always @(posedge clk or negedge nrst) begin&#xa;&#x9;&#x9;if(!nrst) begin &#xa;&#x9;&#x9;&#x9;cs &lt;= #1 IDLE;&#xa;&#x9;&#x9;&#x9;ns &lt;= #1 IDLE;&#xa;&#x9;&#x9;end&#xa;&#x9;&#x9;else begin&#xa;&#x9;&#x9;&#x9;cs &lt;= #1 ns;&#xa;&#x9;&#x9;&#x9;ns &lt;= ns;&#xa;&#x9;&#x9;end&#xa;&#x9;end&#xa;&#x9;&#xa;&#x9;always @(half_dollar or one_dollar) begin&#xa;&#x9;&#x9;case(cs)&#xa;&#x9;&#x9;&#x9;IDLE: begin&#xa;&#x9;&#x9;&#x9;&#x9;if(half_dollar) ns = HALF;&#xa;&#x9;&#x9;&#x9;&#x9;else if(one_dollar) ns = ONE;&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;HALF: begin&#xa;&#x9;&#x9;&#x9;&#x9;if(half_dollar) ns = ONE;&#xa;&#x9;&#x9;&#x9;&#x9;else if(one_dollar) ns = ONE_HALF;&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;ONE: begin&#xa;&#x9;&#x9;&#x9;&#x9;if(half_dollar) ns = ONE_HALF;&#xa;&#x9;&#x9;&#x9;&#x9;else if(one_dollar) ns = TWO;&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;ONE_HALF: begin&#xa;&#x9;&#x9;&#x9;&#x9;if(half_dollar) ns = TWO;&#xa;&#x9;&#x9;&#x9;&#x9;else if(one_dollar) begin&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;ns = IDLE;&#xa;&#x9;&#x9;&#x9;&#x9;end&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;TWO: begin&#xa;&#x9;&#x9;&#x9;&#x9;if(half_dollar) begin&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;ns = IDLE;&#xa;&#x9;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;&#x9;else if(one_dollar) begin&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;ns = IDLE;&#xa;&#x9;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;default: begin&#xa;&#x9;&#x9;&#x9;&#x9;ns = IDLE;&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;endcase&#xa;&#x9;end&#xa;&#x9;&#xa;&#x9;&#xa;&#x9;  always @( posedge clk or negedge nrst ) begin &#xa;&#x9;    if ( !nrst ) begin &#xa;&#x9;      {half_out,dispense} &lt;= 2'b00; &#xa;&#x9;    end&#xa;&#x9;    else begin &#xa;&#x9;      case ( cs ) &#xa;&#x9;        IDLE:{half_out,dispense} &lt;= #1 2'b00; &#xa;&#x9;        HALF:{half_out,dispense} &lt;= #1 2'b00;&#xa;&#x9;        ONE :{half_out,dispense} &lt;= #1 2'b00; &#xa;&#x9;        ONE_HALF: begin&#xa;&#x9;          if(one_dollar) begin&#xa;&#x9;            {half_out,dispense} &lt;= #1 2'b01; &#xa;&#x9;          end&#xa;&#x9;          else begin&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;{half_out,dispense} &lt;= #1 2'b00;&#xa;&#x9;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9; end&#xa;&#x9;        TWO:  begin&#xa;&#x9;          if(half_dollar) begin&#xa;&#x9;           {half_out,dispense} &lt;= #1 2'b01;&#xa;&#x9;          end&#xa;&#x9;          else if(one_dollar) begin&#xa;&#x9;            {half_out,dispense} &lt;= #1 2'b11;&#xa;&#x9;          end&#xa;&#x9;        end&#xa;&#x9;        default begin&#xa;&#x9;          {half_out,dispense} &lt;= #1 2'b00;&#xa;&#x9;        end&#xa;&#x9;      endcase &#xa;&#x9;    end &#xa;&#x9;  end&#xa;&#xa;">
 <Port Y="0.15" Function="" Parent="sell" Height="20" X="-0.0222222" Inout="input" Datasize="1" Color="#00ffff" Side="left" Name="clk" Width="20" Datatype="wire"/>
 <Port Y="0.316667" Function="" Parent="sell" Height="20" X="-0.0222222" Inout="input" Datasize="1" Color="#d2691e" Side="left" Name="nrst" Width="20" Datatype="wire"/>
 <Port Y="0.483333" Function="" Parent="sell" Height="20" X="-0.0222222" Inout="input" Datasize="1" Color="#0000ff" Side="left" Name="half_dollar" Width="20" Datatype="wire"/>
 <Port Y="0.65" Function="" Parent="sell" Height="20" X="-0.0222222" Inout="input" Datasize="1" Color="#8a2be2" Side="left" Name="one_dollar" Width="20" Datatype="wire"/>
 <Port Y="0.233333" Function="" Parent="sell" Height="20" X="0.977778" Inout="output" Datasize="1" Color="#a52a2a" Side="right" Name="half_out" Width="20" Datatype="reg"/>
 <Port Y="0.483333" Function="" Parent="sell" Height="20" X="0.977778" Inout="output" Datasize="1" Color="#2f4f4f" Side="right" Name="dispense" Width="20" Datatype="reg"/>
</Module>
